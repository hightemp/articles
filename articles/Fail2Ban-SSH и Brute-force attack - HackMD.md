# Fail2Ban-SSH –∏ Brute-force attack - HackMD
_**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö**_

**–¶–µ–ª—å —Ä–∞–±–æ—Ç—ã:** –Ω–∞—É—á–∏—Ç—å—Å—è –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å Fail2Ban –¥–ª—è SSH.  
**–ó–∞–¥–∞–Ω–∏–µ:**

1.  –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH-—Å–µ—Ä–≤–µ—Ä –∏ SSH-–∫–ª–∏–µ–Ω—Ç
2.  –ó–∞–ø—Ä–µ—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø –æ—Ç root
3.  –í—ã–≤–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π SSH
4.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Fail2Ban –¥–ª—è SSH
5.  –ü—Ä–æ–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö –∞—Ç–∞–∫

[](#–•–æ–¥-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π-—Ä–∞–±–æ—Ç—ã "–•–æ–¥-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π-—Ä–∞–±–æ—Ç—ã")–•–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã
--------------------------------------------------------------------------------------------------------------

Fail2ban ‚Äì –ø—Ä–æ—Å—Ç–æ–π –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç log‚Äì—Ñ–∞–π–ª—ã –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º, –∏ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ IP –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –Ω–∞—Ä—É—à–∏—Ç–µ–ª–µ–π. –ü—Ä–æ–≥—Ä–∞–º–º–∞ —É–º–µ–µ—Ç –±–æ—Ä–æ—Ç—å—Å—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞—Ç–∞–∫–∞–º–∏ –Ω–∞ –≤—Å–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ \*NIX‚Äì—Å–µ—Ä–≤–∏—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ Apache, Nginx, ProFTPD, vsftpd, Exim, Postfix, named, –∏ —Ç.–¥. –ù–æ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å Fail2ban –∏–∑–≤–µ—Å—Ç–µ–Ω –±–ª–∞–≥–æ–¥–∞—Ä—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ ¬´–∏–∑ –∫–æ—Ä–æ–±–∫–∏¬ª –∫ –∑–∞—â–∏—Ç–µ SSH‚Äì—Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç –∞—Ç–∞–∫ —Ç–∏–ø–∞ ¬´bruteforce¬ª, —Ç–æ –µ—Å—Ç—å –∫ –∑–∞—â–∏—Ç–µ SSH –æ—Ç –ø–µ—Ä–µ–±–æ—Ä–∞ –ø–∞—Ä–æ–ª–µ–π.  
–° –ø–æ–º–æ—â—å—é Fail2Ban –º–æ–∂–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ip-–∞–¥—Ä–µ—Å–∞ –∏ —Ç–∞–∫–∂–µ –¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã ip-–∞–¥—Ä–µ—Å–∞ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å (–≤—Å–µ–≥–¥–∞ –∏–º–µ–ª—Å—è –¥–æ—Å—Ç—É–ø –¥–æ ssh, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π), —Å–∞–º–æ–µ —É–¥–æ–±–Ω–æ–µ –≤ Fail2Ban ‚Äì —ç—Ç–æ —Ç–æ, —á—Ç–æ –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞—â–∏—Ç—ã shh.  
–í –Ω–∞—á–∞–ª–µ, –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã, –ø—Ä–æ–≤–µ–¥—ë–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 1.

![](https://i.imgur.com/SNuxOxA.png)
  
–†–∏—Å—É–Ω–æ–∫ 1 ‚Äì –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –û–°

–£—Å—Ç–∞–Ω–æ–≤–∏–º —Å–≤–µ–∂—É—é –≤–µ—Ä—Å–∏—é fail2ban –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ Debian –ø—Ä–∏ –ø–æ–º–æ—â–∏ —É—Ç–∏–ª–∏—Ç—ã apt, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 2.

![](https://i.imgur.com/fUJoKQn.png)
  
–†–∏—Å—É–Ω–æ–∫ 2 ‚Äì –£—Å—Ç–∞–Ω–æ–≤–∫–∞ fail2ban

–ó–∞–ø—É—Å—Ç–∏–º —Å–µ—Ä–≤–∏—Å fail2ban –∏ –ø—Ä–æ–≤–µ—Ä–∏–º –µ–≥–æ —Å—Ç–∞—Ç—É—Å. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–∞–Ω–¥—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 3. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞, —Å–µ—Ä–≤–∏—Å —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω (active).

![](https://i.imgur.com/Hc1k1U4.png)
  
–†–∏—Å—É–Ω–æ–∫ 3 ‚Äì –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ fail2ban

–ü—Ä–æ—Å–º–æ—Ç—Ä–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã fail2ban –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /etc/fail2ban/. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 4. –°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –∑–¥–µ—Å—å ‚Äì jail.conf, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–≤–µ—Ä–Ω–µ–µ —ç—Ç–æ —à–∞–±–ª–æ–Ω, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª jail.local).

![](https://i.imgur.com/6Xb9z1c.png)
  
–†–∏—Å—É–Ω–æ–∫ 4 ‚Äì –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–¢–µ–ø–µ—Ä—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–±–ª–æ–Ω–∞ jail.conf —Å–æ–∑–¥–∞–¥–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∞–≤–∏–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ jail.local, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 5. –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–º —Å–µ—Ä–≤–∏—Å–µ, –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö, –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ.

![](https://i.imgur.com/VSlTiNt.png)
  
–†–∏—Å—É–Ω–æ–∫ 5 ‚Äì –°–æ–∑–¥–∞—ë–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª jail.local

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º —Å–µ—Ä–≤–∏—Å fail2ban, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 6.

![](https://i.imgur.com/2FZGGI2.png)
  
–†–∏—Å—É–Ω–æ–∫ 6 ‚Äì –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º fail2ban –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ–≥–æ —Å—Ç–∞—Ç—É—Å

–î–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∑–Ω–∞—Ç—å ip –∞–¥—Ä–µ—Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 7.

![](https://i.imgur.com/8L9Mu23.png)
  
–†–∏—Å—É–Ω–æ–∫ 7 ‚Äì –£–∑–Ω–∞—ë–º ip —Ö–æ—Å—Ç–∞

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—Ç—É fail2ban, –≤–≤–µ–¥—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ 3 —Ä–∞–∑–∞. –ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞–Ω –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 8, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 9. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ 8, –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–∫–∏ —Å–µ—Ä–≤–∏—Å ssh –ø–µ—Ä–µ—Å—Ç–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å, –∞ –∑–Ω–∞—á–∏—Ç fail2ban –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –≤–µ—Ä–Ω–æ. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ 9 –≤–∏–¥–Ω–æ, —á—Ç–æ ip –∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–æ–≤–æ–π –º–∞—à–∏–Ω—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.

![](https://i.imgur.com/cvdf4Gw.png)
  
–†–∏—Å—É–Ω–æ–∫ 8 ‚Äì –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–≤–æ–¥ –ø–∞—Ä–æ–ª—è –æ—Ç ssh 3 —Ä–∞–∑–∞

![](https://i.imgur.com/d0KtyDQ.png)
  
–†–∏—Å—É–Ω–æ–∫ 9 ‚Äì –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–∑–ª—ã

–ü—Ä–æ–≤–µ–¥—ë–º –ø–æ–ø—ã—Ç–∫—É –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –ø–∞—Ä–æ–ª—è ssh –ø—Ä–∏ –ø–æ–º–æ—â–∏ hydra –∏–∑ Kali Linux. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ 10, –¥–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ —É–≤–µ–Ω—á–∞–ª–æ—Å—å —É—Å–ø–µ—Ö–æ–º, —Ç–∞–∫ –∫–∞–∫ ip –∞–¥—Ä–µ—Å –∞—Ç–∞–∫—É—é—â–µ–≥–æ –≤—Å—ë –µ—â—ë –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –±–∞–Ω-—Å–ø–∏—Å–∫–µ.

![](https://i.imgur.com/qhRiGsr.png)
  
–†–∏—Å—É–Ω–æ–∫ 10 ‚Äì –ü–æ–ø—ã—Ç–∫–∞ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ ssh –ø—Ä–∏ –ø–æ–º–æ—â–∏ hydra

–†–∞–∑–±–∞–Ω–∏–º ip –∞–¥—Ä–µ—Å –∞—Ç–∞–∫—É—é—â–µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π fail2ban-client unban {ip}, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 11. –ù–∞ —ç—Ç–æ–º –∂–µ —Ä–∏—Å—É–Ω–∫–µ –≤–∏–¥–Ω–æ, —á—Ç–æ ip –∞—Ç–∞–∫—É—é—â–µ–≥–æ –ø—Ä–æ–ø–∞–ª –∏–∑ –±–∞–Ω–∞.

![](https://i.imgur.com/WBHOndw.png)
  
–†–∏—Å—É–Ω–æ–∫ 11 ‚Äì –†–∞–∑–±–∞–Ω ip –∞–¥—Ä–µ—Å–∞

–ü–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–æ–≤–µ—Å—Ç–∏ –±—Ä—É—Ç—Ñ–æ—Ä—Å –∞—Ç–∞–∫—É –ø–æ –ø–æ–¥–±–æ—Ä—É –ø–∞—Ä–æ–ª—è ssh –Ω–∞ –ü–ö –∂–µ—Ä—Ç–≤—ã –µ—â—ë —Ä–∞–∑. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ 12, –∞—Ç–∞–∫–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª–∞—Å—å, –Ω–æ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ, —Ç–∞–∫ –∫–∞–∫ ip –∞—Ç–∞–∫—É—é—â–µ–≥–æ —Å–Ω–æ–≤–∞ —É–≥–æ–¥–∏–ª –≤ –±–∞–Ω-—Å–ø–∏—Å–æ–∫ üòä.

![](https://i.imgur.com/X3twtl1.png)
  
–†–∏—Å—É–Ω–æ–∫ 12 ‚Äì –ü–æ–ø—ã—Ç–∫–∞ –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ ssh  
–ø—Ä–∏ –ø–æ–º–æ—â–∏ hydra –ø–æ—Å–ª–µ —Ä–∞–∑–±–∞–Ω–∞ ip

–ù–∞ —ç—Ç–æ—Ç —Ä–∞–∑, –∫–∞–∫ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ 13, —É—Å–ø–µ–ª–æ –ø—Ä–æ–π—Ç–∏ 27 –ø–æ–ø—ã—Ç–æ–∫ –¥–æ—Å—Ç—É–ø–∞ –∫ ssh (27 –Ω–æ–≤—ã—Ö + 3 —Å—Ç–∞—Ä—ã—Ö = 30), –ø—Ä–µ–∂–¥–µ —á–µ–º fail2ban —É—Å–ø–µ–ª —Å—Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å ip –∞—Ç–∞–∫—É—é—â–µ–≥–æ. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏–∑-–∑–∞ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–π –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã —É—Ç–∏–ª–∏—Ç—ã hydra.

![](https://i.imgur.com/ayb8F1j.png)
  
–†–∏—Å—É–Ω–æ–∫ 13 ‚Äì –ù–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ ssh

–û—Ç–∫–ª—é—á–∏–º sshd –ø—Ä–∞–≤–∏–ª–æ, –ø–æ—Å—Ç–∞–≤–∏–≤ –≤ jail.local –ø–∞—Ä–∞–º–µ—Ç—Ä enable=false, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 14.

![](https://i.imgur.com/nGEEnph.png)
  
–†–∏—Å—É–Ω–æ–∫ 14 ‚Äì –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ sshd

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–∞–Ω–∏–º ip –∞–¥—Ä–µ—Å –∞—Ç–∞–∫—É—é—â–µ–≥–æ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–º —Å–µ—Ä–≤–∏—Å, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É, –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 15.

![](https://i.imgur.com/pFZGFLk.png)
  
–†–∏—Å—É–Ω–æ–∫ 15 ‚Äì –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ fail2ban

–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ 16, –ø–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ ip –∞–¥—Ä–µ—Å–∞ –∞—Ç–∞–∫—É—é—â–µ–≥–æ –º–æ–∂–Ω–æ –±–µ—Å–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –≥–æ—Å—Ç–µ–≤–æ–π –º–∞—à–∏–Ω–µ —á–µ—Ä–µ–∑ ssh. –ò–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —Ç–µ–ø–µ—Ä—å –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ, fail2ban –Ω–µ –±—É–¥–µ—Ç –±–∞–Ω–∏—Ç—å ip –∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–≤–æ–¥ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

![](https://i.imgur.com/8RvAajD.png)
  
–†–∏—Å—É–Ω–æ–∫ 16 ‚Äì –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ ssh –ø–æ—Å–ª–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–ï—â—ë –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Äì –æ—Ç–∫–ª—é—á–∏—Ç—å —Å–µ—Ä–≤–∏—Å fail2ban —Ü–µ–ª–∏–∫–æ–º. –°–Ω–æ–≤–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–∞–≤–∏–ª–æ sshd, –Ω–æ –æ—Ç–∫–ª—é—á–∏–º —Å–µ—Ä–≤–∏—Å fail2ban —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã ¬´sudo service fail2ban stop¬ª, –∫–∞–∫ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–Ω–æ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 17. –ò–∑ –¥–∞–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ —Ç–∞–∫–∂–µ –≤–∏–¥–Ω–æ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Ç–µ–ø–µ—Ä—å –æ—Ç–∫–ª—é—á–µ–Ω, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ inactive.

![](https://i.imgur.com/0fIZlBm.png)
  
–†–∏—Å—É–Ω–æ–∫ 17 ‚Äì –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ fail2ban

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±–µ—Å–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å bruteforce –∞—Ç–∞–∫—É –±–µ–∑ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –±–ª–æ–∫-–ª–∏—Å—Ç fail2ban. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ 18 –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ç–∞–∫–æ–π –∞—Ç–∞–∫–∏ —Å –ø–æ–º–æ—â—å—é hydra –Ω–∞ —Å–ª–æ–≤–∞—Ä–µ rockyou. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞, –ø–∞—Ä–æ–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—é—Ç—Å—è, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

![](https://i.imgur.com/dowKh8C.png)
  
–†–∏—Å—É–Ω–æ–∫ 18 ‚Äì –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –∫ ssh —Å–æ —Å–ª–æ–≤–∞—Ä—ë–º rockyou

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ–¥—ë–º –∞—Ç–∞–∫–∏ –Ω–∞ SSH –¥—Ä—É–≥–∏–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏: patator, medusa –∏ —Å –ø–æ–º–æ—â—å—é Metasploit Framework. –î–ª—è –Ω–∞—á–∞–ª–∞ –æ—Ç–∫–ª—é—á–∏–º fail2ban –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–∞—Ä–æ–ª—å. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å–Ω—É–∫–æ–≤ 19, 20 –∏ 23, –ø–∞—Ä–æ–ª—å —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–æ–±—Ä–∞–Ω –≤—Å–µ–º–∏ —Ç—Ä–µ–º—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏. –ü–∞—Ä–æ–ª—å = "111111". –ù–∞ —Ä–∏—Å—É–Ω–∫–µ 19 –ø–æ–∫–∞–∑–∞–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä –ø–æ–º–æ—â–∏ medusa, –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ 20 - –ø—Ä–∏ –ø–æ–º–æ—â–∏ patator, –∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–∞—Ö 21, 22 –∏ 23 - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ MSFconsole –∏ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –Ω–µ–≥–æ.

![](https://i.imgur.com/NfzBtMm.png)
  
![](https://i.imgur.com/fYRZrde.png)
  
–†–∏—Å—É–Ω–æ–∫ 19 - –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä –ø–æ–º–æ—â–∏ medusa

![](https://i.imgur.com/VU2VO7W.png)
  
–†–∏—Å—É–Ω–æ–∫ 20 - –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä –ø–æ–º–æ—â–∏ patator

![](https://i.imgur.com/5iNMwBH.png)
  
–†–∏—Å—É–Ω–æ–∫ 21 - –ü—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Metasploit Framework

![](https://i.imgur.com/koZy0mz.png)
  
–†–∏—Å—É–Ω–æ–∫ 22 - –ü—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Metasploit Framework

![](https://i.imgur.com/orIThjZ.png)
  
–†–∏—Å—É–Ω–æ–∫ 23 - –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä –ø–æ–º–æ—â–∏ Metasploit Framework

–¢–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∏–º —Å–µ—Ä–≤–∏—Å fail2ban –∫–æ–º–∞–Ω–¥–æ–π sudo service fail2ban start –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –∑–∞–Ω–æ–≤–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–∞—Ä–æ–ª—å –æ—Ç debian –º–∞—à–∏–Ω—ã. –î–ª—è —á–∏—Å—Ç–æ—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞, –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—á–∏—â–∞—Ç—å –±–∞–Ω —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥–æ–π sudo fail2ban-client unban 'ip'. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–æ–≤ 24, 25 –∏ 26 –Ω–∏ –æ–¥–Ω–∞ –∏–∑ —É—Ç–∏–ª–∏—Ç –Ω–µ —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å —Å –ø–æ–¥–±–æ—Ä–æ–º –ø–∞—Ä–æ–ª—è, –≤—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã —É—Ç–∏–ª–∏—Ç–æ–π fail2ban.

![](https://i.imgur.com/2ob6DbH.png)
  
–†–∏—Å—É–Ω–æ–∫ 24 - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ medusa

![](https://i.imgur.com/8BcLozT.png)
  
–†–∏—Å—É–Ω–æ–∫ 25 - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ patator

![](https://i.imgur.com/kP0b8Oz.png)
  
–†–∏—Å—É–Ω–æ–∫ 26 - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ MSF

**–í—ã–≤–æ–¥—ã:** –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ —Ä–∞–±–æ—Ç—ã —Å —É—Ç–∏–ª–∏—Ç–æ–π fail2ban, –∞ —Ç–∞–∫–∂–µ hydra, medusa, patator –∏ Metasploit Framework. –ë—ã–ª–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≥–æ—Å—Ç–µ–≤–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –æ—Ç bruteforce –∞—Ç–∞–∫ –Ω–∞ SSH, –∞ —Ç–∞–∫–∂–µ –±—ã–ª–∏ –ø—Ä–æ–≤–µ–¥–µ–Ω—ã –ø–æ–ø—ã—Ç–∫–∏ –ø–æ–¥–±–æ—Ä–∞ –ø–∞—Ä–æ–ª—è. –£—Ç–∏–ª–∏—Ç–∞ fail2ban —Å–ø—Ä–∞–≤–∏–ª–∞—Å—å —Å–æ —Å–≤–æ–µ–π –∑–∞–¥–∞—á–µ–π, –Ω–∞–¥—ë–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏–≤ –∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–≤ –∞–¥—Ä–µ—Å –∞—Ç–∞–∫—É—é—â–µ–≥–æ, –∑–∞—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–≤ —Å–µ–±—è —Ç–µ–º —Å–∞–º—ã–º —Å –ª—É—á—à–µ–π —Å—Ç–æ—Ä–æ–Ω—ã.